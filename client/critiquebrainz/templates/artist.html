{% extends 'base.html' %}
{% block content %}
<h2>
  {{ artist.name }}
  {% if artist.disambiguation %}
    <small>({{ artist.disambiguation }})</small>
  {% endif %}
</h2>

<div class="row">
  <div class="col-md-3">
    <dl class="dl-horizontal">
      {% if artist.type %}<dt>Type</dt><dd>{{ artist.type }}</dd>{% endif %}
      <dt>Releases</dt><dd>{{ count }}</dd>
    </dl>
  </div>
</div>

<h4>Discography</h4>
{% if count==0 %}
  <p class="lead" style="text-align: center;">No releases found</p>
{% else %}
  <div id="releases" class="row">
    {% for release in releases %}
      <div class="col-sm-4 col-md-3 col-lg-2">
        {% set has_reviews = (release.review_count > 0) %}
        <div class="thumbnail{% if has_reviews %} reviewed{% endif %}">
          <div class="cover-art-container">
            {% if has_reviews %}
              <div class="release-status">Reviewed</div>
            {% endif %}
            <a href="{{ url_for('album.entity', id=release.id) }}"><img class="img-responsive"></a>
            <script>
              $("img").last()
                  .on("error", function () { $(this).attr("src", "/static/img/missing-art.png"); })
                  .attr("src", "//coverartarchive.org/release-group/{{ release.id }}/front-250");
            </script>
          </div>
          <div class="caption">
            <div class="release-title">
              <a href="{{ url_for('album.entity', id=release.id) }}">{{ release.title }}</a>
            </div>
            <div class="clearfix text-muted">
              <div class="pull-left">{{ release['primary-type'] }}</div>
              <div class="pull-right">{{ release['first-release-date'][:4] }}</div>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
    <div class="clearfix"></div>
    <div class="col-md-12">
      <ul class="pagination">
        {% set pages = count//limit %}
        {% if count%limit %}
          {% set pages = pages+1 %}
        {% endif %}
        {% for p in range(pages) %}
          {% set p_offset = p*limit %}
          <li {% if offset == p_offset %}class="active"{% endif %}>
            <a href="{{ url_for('artist.entity', id=id, limit=limit, offset=p*limit) }}">{{ p+1 }}</a>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
{% endif %}
{% endblock %}
