{% macro log_entry(timestamp, admin, action, user='', reason) %}
  {{ timestamp.strftime('%I:%M %p') }} -
  <a href="{{ url_for('user.info', user_id=admin.id) }}">{{ admin.display_name }}</a>
  {{ action }}
  {% if user %}
    <a href="{{ url_for('user.info', user_id=user.id) }}">{{ user.display_name }}</a>.
  {% endif %}
  <p class="small">Reason: {{ reason }}</p>
{%- endmacro %}

{% for date, logs in results %}
  <div class="log-day">
    <h3>{{ date }}</h3>
    <ul class="log-entries">
      {% for log in logs %}
      <li>
        {% if log.action == "archive_review" %}
          {{ log_entry(log.timestamp, log.admin, 'archived a review written by', log.review.user, log.reason) }}
         {% elif log.action == "block_user" %}
          {{ log_entry(log.timestamp, log.admin, 'blocked', log.user, log.reason) }}
        {% endif %}
      </li>
      {% endfor %}
    </ul>
  </div>
{% endfor %}
